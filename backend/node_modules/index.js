const port = 4000;
const express = require("express"); // Assuming correct installation using npm or yarn
const app = express();
const mongoose = require("mongoose"); // Assuming correct installation
const jwt = require("jsonwebtoken"); // Assuming correct installation
const path = require("path"); // Assuming correct installation
const cors = require("cors"); // Assuming correct installation

app.use(express.json());
app.use(cors());

// Database connection with MongoDB (replace with your actual connection string)
try {
  mongoose.connect("//kanchansharma200528:@Kanchan123@cluster3.yxlk6.mongodb.net/ECART");
  console.log("MongoDB connected successfully");
} catch (error) {
  console.error("MongoDB connection error:", error);
  // Optionally, exit the process if the connection fails (consider alternatives)
  // process.exit(1);
}

app.get("/", (req, res) => {
  res.send("Express App is running");
});

// Add your API routes here...

// Error handling middleware (optional but recommended)
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).send("Internal Server Error");
});

// Start the server
try {
  app.listen(port, () => {
    console.log("Server running on port", port);
  });
} catch (error) {
  console.error("Error starting server:", error);
  // Optionally, exit the process if the server fails to start (consider alternatives)
  // process.exit(1);
}